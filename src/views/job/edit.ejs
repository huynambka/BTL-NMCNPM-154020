<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Chỉnh sửa thông tin công việc</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
        <script src="/tinymce/tinymce.min.js" referrerpolicy="origin"></script>
    </head>
    <body>
        <div class="container mt-4">
            <h3 class="text-center mb-4">Chỉnh sửa thông tin công việc</h3>
            <form action="/company/jobs/<%= job._id %>/update" method="POST" class="border p-4 rounded bg-light">
                <div class="mb-3">
                    <label for="title" class="form-label">Tên công việc</label>
                    <input type="text" class="form-control" id="title" name="title" value="<%= job.title %>" required />
                </div>

                <!-- Salary -->
                <div class="mb-3">
                    <label for="salary" class="form-label">Lương</label>
                    <input
                        type="text"
                        class="form-control"
                        id="salary"
                        name="salary"
                        value="<%= job.salary %>"
                        required
                    />
                </div>

                <!-- Salary Negotiation -->
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="salaryNegotiation" name="salary_negotiation" <%=
                    job.salary_negotiation ? 'checked' : '' %>>
                    <label for="salaryNegotiation" class="form-check-label">Lương thoả thuận</label>
                </div>

                <!-- Region -->
                <div class="mb-3">
                    <label for="jobRegion" class="form-label">Khu vực làm việc</label>
                    <select class="form-select" id="jobRegion" name="jobRegion" required>
                      <% provinces.forEach(province => { %>
                        <option value="<%= province.name %>" <%= province.name === job.region ? 'selected' : '' %> >
                          <%= province.name %>
                        </option>
                      <% }) %>
                    </select>
                  </div>

                <!-- Job Experience -->
                <div class="mb-3">
                    <label for="jobExperience" class="form-label">Kinh nghiệm làm việc (năm)</label>
                    <input
                        type="number"
                        class="form-control"
                        id="jobExperience"
                        name="job_experience"
                        value="<%= job.job_experience %>"
                        required
                    />
                </div>

                <!-- Last Date -->
                <div class="mb-3">
                    <label for="lastDate" class="form-label">Hạn cuối ứng tuyển</label>
                    <input
                        type="date"
                        class="form-control"
                        id="lastDate"
                        name="last_date"
                        value="<%= job.last_date.toISOString().split('T')[0] %>"
                        required
                    />
                </div>

                

                 <!-- Job Description -->
            <div class="mb-3">
                <label for="jobDescription" class="form-label">Mô tả công việc</label>
                <textarea class="form-control" id="jobDescription" name="job_description" >
<%- job.job_description %>
                </textarea>
            </div>

            <!-- Job Requirement -->
            <div class="mb-3">
                <label for="jobRequirement" class="form-label">Yêu cầu công việc</label>
                <textarea class="form-control" id="jobRequirement" name="job_requirement" >
<%- job.job_requirement %>
                </textarea>
            </div>

            <!-- Job Benefit -->
            <div class="mb-3">
                <label for="jobBenefit" class="form-label">Phúc lợi</label>
                <textarea class="form-control" id="jobBenefit" name="job_benefit" >
<%- job.job_benefit %>
                </textarea>
            </div>

                <!-- Location -->
                <div class="mb-3">
                    <label for="location" class="form-label">Địa điểm làm việc</label>
                    <input
                        type="text"
                        class="form-control"
                        id="location"
                        name="location"
                        value="<%= job.location %>"
                        required
                    />
                </div>

                <!-- Job Time -->
                <div class="mb-3">
                    <label for="jobTime" class="form-label">Thời gian làm việc</label>
                    <input
                        type="text"
                        class="form-control"
                        id="jobTime"
                        name="job_time"
                        value="<%= job.job_time %>"
                        required
                    />
                </div>

                <!-- Level -->
                <div class="mb-3">
                    <label for="level" class="form-label">Cấp độ</label>
                    <input type="text" class="form-control" id="level" name="level" value="<%= job.level %>" required />
                </div>

                <!-- Number of Recruitment -->
                <div class="mb-3">
                    <label for="numberOfRecruitment" class="form-label">Số lượng ứng tuyển</label>
                    <input
                        type="number"
                        class="form-control"
                        id="numberOfRecruitment"
                        name="number_of_recruitment"
                        value="<%= job.number_of_recruitment %>"
                        required
                    />
                </div>

                <!-- Job Status -->
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="jobStatus" name="job_status" <%= job.job_status
                    ? 'checked' : '' %>>
                    <label for="jobStatus" class="form-check-label">Công việc còn tuyển</label>
                </div>

                <!-- Type of Work -->
                <div class="mb-3">
                    <label for="typeOfWork" class="form-label">Loại hình làm việc</label>
                    <input
                        type="text"
                        class="form-control"
                        id="typeOfWork"
                        name="type_of_work"
                        value="<%= job.type_of_work %>"
                        required
                    />
                </div>

                <!-- Skills -->
                <div class="mb-3">
                    <label for="skill" class="form-label">Kỹ năng liên quan</label>
                    <input
                        type="text"
                        class="form-control"
                        id="skill"
                        name="skill"
                        value="<%= job.skill.join(', ') %>"
                        placeholder="Separate skills with commas"
                    />
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary w-100">Lưu chỉnh sửa</button>
            </form>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Khởi tạo TinyMCE
            tinymce.init({
                selector: '#jobDescription, #jobRequirement, #jobBenefit',
                plugins: 'lists link table image code',
                toolbar: 'undo redo | formatselect | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | link image code',
                height: 300,
            });
        </script>
    </body>
</html>
